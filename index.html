<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fickle Friday</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&display=swap" rel="stylesheet">

</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-55MZGEHKJ2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-55MZGEHKJ2');
</script>
<body>

  <header>
    <div class="logo">Isaac D2</div>
  </header>

  <section class="hero">
    <h1><span class="highlight">Fickle</span> Friday</h1>
    <h2>the newsletter about my tinkerings</h2>
    <form class="subscribe-form">
      <div class="subscribe-container">
        <input type="email" id="emailAddress" placeholder="Email Address" required>
        <button type="submit">Subscribe</button>
      </div>
    </form>
    <div class="trust-text">
      <p>I'll only send emails I'd want to read</p>
    </div>
  </section>

  <section class="features">
    <h2>What You Get</h2>
    <div class="feature-grid">
      <div class="feature">
        <div class="circle">
          <span class="circle-text">üîç</span>
        </div>        
        <h3>Coding</h3>
        <p>You like coding? Me too. Let's learn more together!</p>
      </div>
      <div class="feature">
        <div class="circle">
          <span class="circle-text">üí°</span>
        </div>   
        <h3>Untapped Brilliance</h3>
        <p>Okay, so brillance may be a little strong. But I've got a couple fun ideas to share with you.</p>
      </div>
      <div class="feature">
        <div class="circle">
          <span class="circle-text">üõ†Ô∏è</span>
        </div>   
        <h3>Experiments</h3>
        <p>I'm notorious for starting random side projects. Join the newsletter to hear about them first!</p>
      </div>
    </div>
  </section>

  <section class="mission">
    <div class="mission-card">
      <h1>The Mission</h1>
      <p><span class="highlight">Fickle</span> Friday exists as a reminder to keep trying things. Experimenting with your ideas, can have some fun outcomes. You never know when you are going to use part of you weekend project as part of a finished product.</p>
    </div>
  </section>

  <section class="about">
    <h1>About</h1>
    <p>I‚Äôm Isaac D2, and I‚Äôm sharing what I learn as I experiment on different projects.</p>
    <p>If you want to grow alongside me as a developer and hear about fun little projects that will likely never ship, this is for you.</p>
    <form class="subscribe-form">
      <div class="subscribe-container">
        <input type="email" id="emailAddress" placeholder="Email Address" required>
        <button type="submit">Subscribe</button>
      </div>
    </form>
    <div class="trust-text">
      <p>I'll only send emails I'd want to read</p>
    </div>
  </section>

  <footer class="site-footer">
    <p>&copy; 2025 Isaac D2. All rights reserved.</p>
    <a href="/privacy" class= "gray-link" target="_blank" rel="noopener">Privacy Policy</a>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector(".subscribe-form");
    const emailInput = form.querySelector('input[type="email"]');
    const trustText = document.querySelector(".trust-text");

    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      const email = emailInput.value;
      if (!email) return;

      const originalText = trustText.textContent;
      const originalColor = trustText.style.color || getComputedStyle(trustText).color;

      // Set up transition for smooth text and color changes
      trustText.style.transition = "opacity 0.5s ease, color 0.5s ease";
      trustText.style.opacity = "0"; // Fade out

      // Store timers so we can cancel them if needed
      let successTimer, revertTimer;

      // Schedule success message
      successTimer = setTimeout(() => {
        trustText.textContent = "Thanks for helping boost my ego. You've been subscribed.";
        trustText.style.color = "#277A7D";
        trustText.style.opacity = "1"; // Fade in
      }, 500);

      // Schedule revert to original text after 4 seconds
      revertTimer = setTimeout(() => {
        trustText.style.opacity = "0";
        setTimeout(() => {
          trustText.textContent = originalText;
          trustText.style.color = originalColor;
          trustText.style.opacity = "1";
        }, 500);
      }, 4000);

      // Reset form immediately
      form.reset();

      try {
        const response = await fetch("https://api.isaacd2.com/newsletter/subscribe", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ "emailAddress": email }),
        });

        if (response.status !== 201) {
          // Clear scheduled success and revert timers
          clearTimeout(successTimer);
          clearTimeout(revertTimer);

          // Show error message with fade
          trustText.style.opacity = "0";
          setTimeout(() => {
            trustText.textContent = "Subscription failed. Please try again.";
            trustText.style.color = "#E17163"; // Use your highlight color instead of plain red
            trustText.style.opacity = "1";
          }, 500);

          setTimeout(() => {
            trustText.style.opacity = "0";
            setTimeout(() => {
              trustText.textContent = originalText;
              trustText.style.color = originalColor;
              trustText.style.opacity = "1";
            }, 500);
          }, 6000); // Show error for 6 seconds

          console.warn("Subscription failed:", response.statusText);
        }
      } catch (error) {
        // Clear scheduled success and revert timers
        clearTimeout(successTimer);
        clearTimeout(revertTimer);

        // Show error message with fade
        trustText.style.opacity = "0";
        setTimeout(() => {
          trustText.textContent = "Your subscription failed. Please try again.";
          trustText.style.color = "#E17163"; // Use your highlight color
          trustText.style.opacity = "1";
        }, 500);

        setTimeout(() => {
          trustText.style.opacity = "0";
          setTimeout(() => {
            trustText.textContent = originalText;
            trustText.style.color = originalColor;
            trustText.style.opacity = "1";
          }, 500);
        }, 6000); // Show error for 6 seconds

        console.error("Error:", error);
      }
    });
  });
  </script>
  
</body>
</html>
